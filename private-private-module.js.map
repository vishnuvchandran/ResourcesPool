{"version":3,"sources":["webpack:///./node_modules/rxjs-compat/_esm5/add/operator/do.js","webpack:///./node_modules/rxjs-compat/_esm5/operator/do.js","webpack:///./src/app/private/private.component.html","webpack:///./src/app/private/private.component.scss","webpack:///./src/app/private/private.component.ts","webpack:///./src/app/private/private.module.ts","webpack:///./src/app/private/private.routing.ts","webpack:///./src/app/shared/http/interceptor/interceptor.ts"],"names":[],"mappings":"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","file":"private-private-module.js","sourcesContent":["import { Observable } from 'rxjs';\nimport { _do } from '../../operator/do';\nObservable.prototype.do = _do;\nObservable.prototype._do = _do;\n//# sourceMappingURL=do.js.map","import { tap as higherOrder } from 'rxjs/operators';\nexport function _do(nextOrObserver, error, complete) {\n    return higherOrder(nextOrObserver, error, complete)(this);\n}\n//# sourceMappingURL=do.js.map","module.exports = \"<div class=\\\"page\\\" *ngIf=\\\"isMasterDataLoaded\\\">\\n  <div class=\\\"page-main\\\">\\n    <div class=\\\"header py-4\\\">\\n      <div class=\\\"container\\\">\\n        <div class=\\\"d-flex\\\">\\n          <a class=\\\"header-brand\\\" href=\\\"./index.html\\\">\\n            <img src=\\\"https://www.pitsolutions.ch/fileadmin/themes/templates/images/PITS-Logo.svg\\\" class=\\\"header-brand-img\\\" alt=\\\"tabler logo\\\">\\n          </a>\\n\\n          <div class=\\\"d-flex ml-auto\\\">\\n            <ul class=\\\"nav nav-tabs border-0\\\">\\n              <li class=\\\"nav-item\\\">\\n                <a [routerLink]=\\\"['/home']\\\" class=\\\"nav-link pt-1 pb-1\\\">\\n                  <i class=\\\"fe fe-home\\\"></i> Home</a>\\n              </li>\\n              <li class=\\\"nav-item\\\" *hasPermission=\\\"'master-menu'\\\">\\n                <a [routerLink]=\\\"['/home/master-data']\\\" class=\\\"nav-link pt-1 pb-1\\\">\\n                  <i class=\\\"fe fe-box\\\"></i> Master Data</a>\\n              </li>\\n              <li class=\\\"nav-item\\\" *hasPermission=\\\"'list-resource'\\\">\\n                <a [routerLink]=\\\"['/home/resources']\\\" class=\\\"nav-link pt-1 pb-1\\\">\\n                  <i class=\\\"fe fe-users\\\"></i> Resources</a>\\n              </li>\\n              <li class=\\\"nav-item\\\" *hasPermission=\\\"'list-all-projects|list-user-projects'\\\">\\n                <a [routerLink]=\\\"['/home/projects']\\\" class=\\\"nav-link pt-1 pb-1\\\">\\n                  <i class=\\\"fe fe-folder\\\"></i> Projects</a>\\n              </li>\\n              <li class=\\\"nav-item\\\" *hasPermission=\\\"'list-all-role-permissions'\\\">\\n                <a [routerLink]=\\\"['/home/permissions']\\\" class=\\\"nav-link pt-1 pb-1\\\">\\n                  <i class=\\\"fe fe-settings\\\"></i> Permissions</a>\\n              </li>\\n            </ul>\\n          </div>\\n\\n          <div class=\\\"d-flex order-lg-2 ml-auto\\\">\\n            <div class=\\\"dropdown\\\" dropdown>\\n              <a dropdownToggle href=\\\"javascript:void(0)\\\" class=\\\"nav-link pr-0 leading-none\\\">\\n                <span class=\\\"avatar\\\" style=\\\"background-image: url(./demo/faces/female/25.jpg)\\\"></span>\\n                <span class=\\\"ml-2 d-none d-lg-block\\\">\\n                  <span class=\\\"text-default\\\">{{userObject.username}}</span>\\n                  <small class=\\\"text-muted d-block mt-1\\\">Admin{{userObject.role}}</small>\\n                </span>\\n              </a>\\n              <div *dropdownMenu class=\\\"dropdown-menu dropdown-menu-right dropdown-menu-arrow\\\" role=\\\"menu\\\">\\n                <a role=\\\"menuitem\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">\\n                  <i class=\\\"dropdown-icon fe fe-user\\\"></i> Profile\\n                </a>\\n                <a role=\\\"menuitem\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">\\n                  <i class=\\\"dropdown-icon fe fe-settings\\\"></i> Settings\\n                </a>\\n                <a role=\\\"menuitem\\\" class=\\\"dropdown-item\\\" href=\\\"javascript:void(0)\\\" (click)=\\\"logOut()\\\">\\n                  <i class=\\\"dropdown-icon fe fe-log-out\\\"></i> Sign out\\n                </a>\\n              </div>\\n            </div>\\n          </div>\\n          <a href=\\\"#\\\" class=\\\"header-toggler d-lg-none ml-3 ml-lg-0\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#headerMenuCollapse\\\">\\n            <span class=\\\"header-toggler-icon\\\"></span>\\n          </a>\\n        </div>\\n      </div>\\n    </div>   \\n    <div class=\\\"my-3 my-md-5\\\">\\n      <div class=\\\"container\\\">\\n        <app-notifications></app-notifications>\\n        <router-outlet></router-outlet>\\n      </div>\\n    </div>\\n  </div>\\n  <footer class=\\\"footer\\\">\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row align-items-center flex-row-reverse\\\">\\n        <div class=\\\"col-auto ml-lg-auto\\\"></div>\\n        <div class=\\\"col-12 col-lg-auto mt-3 mt-lg-0 text-center\\\">\\n          Copyright Â© 2018\\n          <a href=\\\"http://www.pitsolutions.ch/\\\">Pit Solutions</a>\\n          All rights reserved.\\n        </div>\\n      </div>\\n    </div>\\n  </footer>\\n</div>\\n\"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpParams, HttpRequest } from '@angular/common/http';\nimport { Auth } from '../shared/auth/auth';\nimport { BASE_URL, ApplicationConstant } from '../shared/constants/constant';\nimport {\n  CommonSharedDataStorageService\n} from '../shared/shared-services-and-components-module/services/common-shared-data-storage.service';\n\n@Component({\n  selector: 'app-private',\n  templateUrl: './private.component.html',\n  styleUrls: ['./private.component.scss']\n})\nexport class PrivateComponent implements OnInit {\n\n  public userObject: any = null;\n  public isMasterDataLoaded = false;\n  constructor(\n    private http: HttpClient,\n    private auth: Auth,\n    private sharedDataStorage: CommonSharedDataStorageService\n  ) { }\n\n  ngOnInit() {\n    this.userObject = this.auth.getUserLoginData();\n    this.loadMasterData();\n  }\n\n  public logOut() {\n    this.auth.logout();\n  }\n\n  private loadMasterData() {\n    const curContext = this;\n    this.sharedDataStorage.loadData(this.http).then(function (data) {\n      curContext.isMasterDataLoaded = data;\n    });\n  }\n\n\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient, HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpModule, Http } from '@angular/http';\nimport { BsDropdownModule } from 'ngx-bootstrap';\nimport { PrivateRouting } from './private.routing';\nimport { AppInterceptor } from '../shared/http/interceptor/interceptor';\nimport { PrivateComponent } from './private.component';\nimport { SharedServicesAndComponentsModule } from '../shared/shared-services-and-components-module/shared-services-and-components-module';\nimport { Auth } from '../shared/auth/auth';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedServicesAndComponentsModule,\n    PrivateRouting,\n    HttpClientModule,\n    BsDropdownModule.forRoot()\n  ],\n  providers: [\n    HttpClient,\n    { provide: HTTP_INTERCEPTORS, useClass: AppInterceptor, multi: true },\n    Auth\n  ],\n  declarations: [\n    PrivateComponent,\n  ],\n})\nexport class PrivateModule { }\n","\nimport { ModuleWithProviders } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PrivateComponent } from './private.component';\n\n\nconst routes: Routes = [\n  {\n    path: '', component: PrivateComponent,\n    children: [\n      { path: '', loadChildren: '../modules/calendar/calendar.module#CalendarModule' },\n      { path: 'resources', loadChildren: '../modules/resources/resources.module#ResourcesModule' },\n      { path: 'master-data', loadChildren: '../modules/master-data/master-data.module#MasterDataModule' },\n      { path: 'projects', loadChildren: '../modules/projects/projects.module#ProjectsModule' },\n      { path: 'permissions', loadChildren: '../modules/permissions/permissions.module#PermissionsModule' }\n    ]\n  },\n\n];\n\nexport const PrivateRouting: ModuleWithProviders = RouterModule.forChild(routes);\n","import { Injectable } from '@angular/core';\nimport { Auth } from '../../auth/auth';\nimport { ToastrService } from 'ngx-toastr';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor,\n  HttpResponse, HttpErrorResponse\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport 'rxjs/add/operator/do';\nimport { BASE_URL } from '../../constants/constant';\n\n@Injectable()\nexport class AppInterceptor implements HttpInterceptor {\n  constructor(\n    private auth: Auth,\n    public toastr: ToastrService\n  ) { }\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    let httpHeaders = this.getHeaders(this.auth.getUserLoginData());\n    request = request.clone({\n      setHeaders: httpHeaders\n    });\n    return next.handle(request).do(\n      succ => {\n        if (succ instanceof HttpResponse) {\n          this.handleSuccess(succ);\n        }\n      },\n      err => {\n        if (err instanceof HttpErrorResponse) {\n          this.handleError(request, next, err);\n        }\n      });\n  }\n\n  handleError(request, next, err) {\n    if (err.status === 401) {\n      this.handle401Error(request, next);\n    } else {\n      this.handleRequestError(err);\n    }\n  }\n\n  handleSuccess(succ) {\n    if (succ['body']['message'] !== undefined) {\n      this.toastr.success(succ['body']['message']);\n    }\n  }\n\n  private handle401Error(request: HttpRequest<any>, next: HttpHandler) {\n    let parentContext = this;\n    this.auth.refreshToken().then(\n      function (data) {\n        if (data) {\n          let httpHeaders = parentContext.getHeaders(parentContext.auth.getUserLoginData());\n          window.location.reload();\n        }\n      }\n    );\n  }\n\n  private handleRequestError(err) {\n    if (err['error']['message'] !== undefined) {\n      let errors = [];\n      let errorObject = err['error']['errors'];\n      for (let error in errorObject) {\n        if (errorObject.hasOwnProperty(error)) {\n          errors.push(errorObject[error]);\n        }\n      }\n\n      this.toastr.error(errors.join('<br>'), err['error']['message'], { enableHtml: true });\n\n    }\n  }\n\n\n  private getHeaders(userDetails) {\n    let headers = {};\n    let currentUser = this.auth.getUserLoginData();\n    if (currentUser) {\n      headers['Authorization'] = currentUser.token_type + ' ' + currentUser.access_token;\n    }\n    headers['domain'] = window.location.origin;\n    return headers;\n  }\n}\n"],"sourceRoot":""}