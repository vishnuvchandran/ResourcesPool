(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{qj1o:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=function(){},u=e("pMnS"),r=e("ueff"),i=e("lOTE"),s=e("gIcY"),a=e("Ip0R"),d=e("nIEP"),c=e("ztkf"),m=e("Nzwi"),p=function(){function n(n,l,e){this.formBuilder=n,this.http=l,this.objectIterator=e,this.formResult=new t.EventEmitter,this.permissionList=[],this.permissionNameList=[],this.currentPermissions=[],this.dataLoaded=!1,this.endPoint=m.b+m.a.PERMISSIONS}return n.prototype.ngOnInit=function(){this.getAllAssignedPermissions()},n.prototype.getAllAssignedPermissions=function(){var n=this;this.http.get(this.endPoint).subscribe(function(l){n.permissionList=n.objectIterator.transform(l.master),n.currentPermissions=n.objectIterator.transform(l.currentPermissions),n.permissionNameList=l.masterNames,n.setFormGroup(),n.dataLoaded=!0})},n.prototype.submit=function(n){var l=this,e=this,t={};this.currentPermissions.forEach(function(n){var l=e.convertHyphenUnderscore(n.name);t[l]=e.convertToValue(l)}),this.http.post(this.endPoint,t).subscribe(function(n){l.formResult.emit(n)})},n.prototype.convertHyphenUnderscore=function(n){return n.replace(/-/g,"_")},n.prototype.convertToValue=function(n){var l=this;return this.dataForm.value[n].map(function(n,e){return n&&l.permissionNameList[e]}).filter(function(n){return!!n})},n.prototype.setFormGroup=function(){var n={},l=this;this.currentPermissions.forEach(function(e){var t=l.convertHyphenUnderscore(e.name);n[t]=new s.FormArray(l.permissionNameList.map(function(n){return new s.FormControl(e.permissions.indexOf(n)>-1)}))}),this.dataForm=this.formBuilder.group(n)},n}(),g=e("t/Na"),f=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function h(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""]))],null,function(n,l){n(l,1,0,l.context.$implicit.label)})}function v(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,10,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,9,"div",[["class","text-center"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),t["\u0275did"](2,212992,null,0,s.FormArrayName,[[3,s.ControlContainer],[8,null],[8,null]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,s.ControlContainer,null,[s.FormArrayName]),t["\u0275did"](4,16384,null,0,s.NgControlStatusGroup,[[4,s.ControlContainer]],null,null),(n()(),t["\u0275eld"](5,0,null,null,5,"input",[["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(n,l,e){var o=!0;return"change"===l&&(o=!1!==t["\u0275nov"](n,6).onChange(e.target.checked)&&o),"blur"===l&&(o=!1!==t["\u0275nov"](n,6).onTouched()&&o),o},null,null)),t["\u0275did"](6,16384,null,0,s.CheckboxControlValueAccessor,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,s.NG_VALUE_ACCESSOR,function(n){return[n]},[s.CheckboxControlValueAccessor]),t["\u0275did"](8,671744,null,0,s.FormControlName,[[3,s.ControlContainer],[8,null],[8,null],[6,s.NG_VALUE_ACCESSOR],[2,s["\u0275angular_packages_forms_forms_j"]]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,s.NgControl,null,[s.FormControlName]),t["\u0275did"](10,16384,null,0,s.NgControlStatus,[[4,s.NgControl]],null,null)],function(n,l){n(l,2,0,l.component.convertHyphenUnderscore(l.context.$implicit.name)),n(l,8,0,l.parent.context.index)},function(n,l){n(l,1,0,t["\u0275nov"](l,4).ngClassUntouched,t["\u0275nov"](l,4).ngClassTouched,t["\u0275nov"](l,4).ngClassPristine,t["\u0275nov"](l,4).ngClassDirty,t["\u0275nov"](l,4).ngClassValid,t["\u0275nov"](l,4).ngClassInvalid,t["\u0275nov"](l,4).ngClassPending),n(l,5,0,t["\u0275nov"](l,10).ngClassUntouched,t["\u0275nov"](l,10).ngClassTouched,t["\u0275nov"](l,10).ngClassPristine,t["\u0275nov"](l,10).ngClassDirty,t["\u0275nov"](l,10).ngClassValid,t["\u0275nov"](l,10).ngClassInvalid,t["\u0275nov"](l,10).ngClassPending)})}function C(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"td",[["class","text-center"]],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,["","."])),(n()(),t["\u0275eld"](3,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,["",""])),(n()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](6,802816,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,6,0,l.component.currentPermissions)},function(n,l){n(l,2,0,l.context.index+1),n(l,4,0,l.context.$implicit.label)})}function b(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,23,"form",[["class","card"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,e){var o=!0,u=n.component;return"submit"===l&&(o=!1!==t["\u0275nov"](n,2).onSubmit(e)&&o),"reset"===l&&(o=!1!==t["\u0275nov"](n,2).onReset()&&o),"ngSubmit"===l&&(o=!1!==u.submit(u.dataForm)&&o),o},null,null)),t["\u0275did"](1,16384,null,0,s["\u0275angular_packages_forms_forms_bg"],[],null,null),t["\u0275did"](2,540672,null,0,s.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t["\u0275prd"](2048,null,s.ControlContainer,null,[s.FormGroupDirective]),t["\u0275did"](4,16384,null,0,s.NgControlStatusGroup,[[4,s.ControlContainer]],null,null),(n()(),t["\u0275eld"](5,0,null,null,5,"div",[["class","card-header"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,1,"h3",[["class","card-title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Permissions"])),(n()(),t["\u0275eld"](8,0,null,null,2,"div",[["class","card-options"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Save Changes"])),(n()(),t["\u0275eld"](11,0,null,null,12,"div",[["class","table-responsive"]],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,11,"table",[["class","table table-bordered table-hover table-sm mb-0"]],null,null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,7,"thead",[],null,null,null,null,null)),(n()(),t["\u0275eld"](14,0,null,null,6,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](15,0,null,null,1,"th",[["class","text-center"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["#"])),(n()(),t["\u0275eld"](17,0,null,null,1,"th",[["width","40%"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Name"])),(n()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](20,802816,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](21,0,null,null,2,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](23,802816,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,2,0,e.dataForm),n(l,20,0,e.currentPermissions),n(l,23,0,e.permissionList)},function(n,l){n(l,0,0,t["\u0275nov"](l,4).ngClassUntouched,t["\u0275nov"](l,4).ngClassTouched,t["\u0275nov"](l,4).ngClassPristine,t["\u0275nov"](l,4).ngClassDirty,t["\u0275nov"](l,4).ngClassValid,t["\u0275nov"](l,4).ngClassInvalid,t["\u0275nov"](l,4).ngClassPending)})}function y(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](1,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,1,0,l.component.dataLoaded)},null)}var F=t["\u0275ccf"]("app-permission-listing",p,function(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"app-permission-listing",[],null,null,null,y,f)),t["\u0275prd"](512,null,d.a,d.a,[c.a]),t["\u0275did"](2,114688,null,0,p,[s.FormBuilder,g.c,d.a],null,null)],function(n,l){n(l,2,0)},null)},{},{formResult:"formResult"},[]),_=e("r75N"),N=e("msM0"),R=e("SZbH"),P=e("S7LP"),E=e("6aHO"),O=e("008C"),S=e("ZYCi"),w=e("Fq6B"),I=e("Th2w");e.d(l,"PermissionsModuleNgFactory",function(){return L});var L=t["\u0275cmf"](o,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[u.a,r.a,i.a,F]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[t.LOCALE_ID,[2,a["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,s["\u0275angular_packages_forms_forms_i"],s["\u0275angular_packages_forms_forms_i"],[]),t["\u0275mpd"](4608,s.FormBuilder,s.FormBuilder,[]),t["\u0275mpd"](4608,g.j,g.p,[a.DOCUMENT,t.PLATFORM_ID,g.n]),t["\u0275mpd"](4608,g.q,g.q,[g.j,g.o]),t["\u0275mpd"](5120,g.a,function(n,l,e){return[n,new _.a(l,e)]},[g.q,N.a,R.k]),t["\u0275mpd"](4608,g.m,g.m,[]),t["\u0275mpd"](6144,g.k,null,[g.m]),t["\u0275mpd"](4608,g.i,g.i,[g.k]),t["\u0275mpd"](6144,g.b,null,[g.i]),t["\u0275mpd"](4608,g.g,g.l,[g.b,t.Injector]),t["\u0275mpd"](4608,g.c,g.c,[g.g]),t["\u0275mpd"](4608,P.a,P.a,[]),t["\u0275mpd"](4608,E.a,E.a,[t.ComponentFactoryResolver,t.NgZone,t.Injector,P.a,t.ApplicationRef]),t["\u0275mpd"](4608,O.a,O.a,[t.RendererFactory2,E.a]),t["\u0275mpd"](1073742336,a.CommonModule,a.CommonModule,[]),t["\u0275mpd"](1073742336,s["\u0275angular_packages_forms_forms_bb"],s["\u0275angular_packages_forms_forms_bb"],[]),t["\u0275mpd"](1073742336,s.FormsModule,s.FormsModule,[]),t["\u0275mpd"](1073742336,s.ReactiveFormsModule,s.ReactiveFormsModule,[]),t["\u0275mpd"](1073742336,g.e,g.e,[]),t["\u0275mpd"](1073742336,g.d,g.d,[]),t["\u0275mpd"](1073742336,S.n,S.n,[[2,S.t],[2,S.l]]),t["\u0275mpd"](1073742336,w.a,w.a,[]),t["\u0275mpd"](1073742336,I.a,I.a,[]),t["\u0275mpd"](1073742336,o,o,[]),t["\u0275mpd"](256,g.n,"XSRF-TOKEN",[]),t["\u0275mpd"](256,g.o,"X-XSRF-TOKEN",[]),t["\u0275mpd"](1024,S.j,function(){return[[{path:"",component:p}]]},[])])})},r75N:function(n,l,e){"use strict";e("msM0");var t=e("t/Na"),o=e("6blF"),u=e("xMyE");function r(n,l,e){return Object(u.a)(n,l,e)(this)}o.a.prototype.do=r,o.a.prototype._do=r,e.d(l,"a",function(){return i});var i=function(){function n(n,l){this.auth=n,this.toastr=l}return n.prototype.intercept=function(n,l){var e=this,o=this.getHeaders(this.auth.getUserLoginData());return n=n.clone({setHeaders:o}),l.handle(n).do(function(n){n instanceof t.h&&e.handleSuccess(n)},function(o){o instanceof t.f&&e.handleError(n,l,o)})},n.prototype.handleError=function(n,l,e){401===e.status?this.handle401Error(n,l):this.handleRequestError(e)},n.prototype.handleSuccess=function(n){void 0!==n.body.message&&this.toastr.success(n.body.message)},n.prototype.handle401Error=function(n,l){var e=this;this.auth.refreshToken().then(function(n){n&&(e.getHeaders(e.auth.getUserLoginData()),window.location.reload())})},n.prototype.handleRequestError=function(n){if(void 0!==n.error.message){var l=[],e=n.error.errors;for(var t in e)e.hasOwnProperty(t)&&l.push(e[t]);this.toastr.error(l.join("<br>"),n.error.message,{enableHtml:!0})}},n.prototype.getHeaders=function(n){var l={},e=this.auth.getUserLoginData();return e&&(l.Authorization=e.token_type+" "+e.access_token),l.domain=window.location.origin,l},n}()}}]);